---
layout: single  
author: Huijo  
date: 2025-11-2
tags:
   - Programing
classes: wide  
title: "Kubernetes Command Cheat Sheet"
---

A clean and practical reference for managing and troubleshooting Kubernetes clusters.  
These are the commands I use most often.

# ğŸ“¦ Pods (Inspect, Logs, Exec, Manage)

## ğŸ” List & Inspect Pods

```bash
kubectl get pods
kubectl get pods -n <namespace>
kubectl get pods --all-namespaces
kubectl describe pod <pod-name>
```

### Pods on a specific node

```bash
kubectl get pods -A -o wide | grep <node>
```

### Pod resource requests

```bash
kubectl get pods -n <ns> -o json | jq -r '.items[] |
  "\(.metadata.name)\tCPU:\(.spec.containers[0].resources.requests.cpu)\tMEM:\(.spec.containers[0].resources.requests.memory)"'
```

### Pod tolerations

```bash
kubectl get pods -n <ns> -o json | jq -r '.items[] |
  "\(.metadata.name)\t\(.spec.tolerations | map(.key) | join(","))"'
```

### Pod events

```bash
kubectl describe pod <pod> -n <ns> | grep -A 10 "Events:"
```

### Pod resource usage (metrics-server)

```bash
kubectl top pods -n <ns>
```

## ğŸªµ Logs

```bash
kubectl logs <pod>
kubectl logs <pod> -c <container>
kubectl logs -f <pod>
kubectl logs -l app=<label>
```

## ğŸ’» Exec / Shell Access

```bash
kubectl exec -it <pod> -- /bin/bash
kubectl exec -it <pod> -- /bin/sh
kubectl exec -it <pod> -c <container> -- /bin/bash
```

## ğŸ§¹ Pod Management

```bash
kubectl delete pod <pod> -n <ns>
kubectl delete pod <pod> -n <ns> --force --grace-period=0
kubectl delete pod --all -n <ns>
kubectl delete pod -n <ns> -l key=value
```


# ğŸŒ Services

```bash
kubectl get services
kubectl get services -n <namespace>
kubectl get services --all-namespaces
```

# ğŸ§  Nodes (Inspect, Usage, Manage)

## ğŸ” Node Info

```bash
kubectl get nodes
kubectl get nodes -o wide
kubectl describe node <node>
```

### Node labels, taints, instance type

```bash
kubectl get node <node> -o json | jq '.metadata.labels'
kubectl describe node <node> | grep Taints
kubectl get node <node> -o json | jq -r '.metadata.labels."node.kubernetes.io/instance-type"'
```

## ğŸ“Š Node Resource Usage

```bash
kubectl describe node <node> | grep -A 5 "Allocated resources"
kubectl top nodes
```

## ğŸ›  Node Management (Cordon / Drain / Delete)

### ğŸ”¹ Cordon â€” stop scheduling new pods

```bash
kubectl cordon <node>
```

### ğŸ”¹ Drain â€” evict workloads safely

```bash
kubectl drain <node> --ignore-daemonsets --delete-emptydir-data --force
```

### ğŸ”¹ Delete â€” remove node from Kubernetes

```bash
kubectl delete node <node> --force --grace-period=0
```

### ğŸ“˜ Quick Comparison

| Action     | Stops New Pods? | Evicts Pods?   | Removes Node? | Use Case                |
| ---------- | --------------- | -------------- | ------------- | ----------------------- |
| **cordon** | âœ”ï¸              | âŒ              | âŒ             | Prepare for maintenance |
| **drain**  | âœ”ï¸              | âœ”ï¸             | âŒ             | Safely remove workloads |
| **delete** | âœ”ï¸              | âœ”ï¸ (node gone) | âœ”ï¸            | Node is broken or gone  |

# ğŸ§± Storage (PVC)

### List PVCs

```bash
kubectl get pvc -A
kubectl get pvc -n <namespace>
```

### Describe a PVC

```bash
kubectl describe pvc <pvc-name> -n <namespace>
```

### Check volume affinity issues

```bash
kubectl describe pod <pod> -n <ns> | grep -i volume
```

# â›‘ Pod Disruption Budgets (PDB)

```bash
kubectl get pdb -A
kubectl get pdb -n <namespace>
kubectl describe pdb <pdb> -n <namespace>
```

# ğŸ”§ Useful Commands

### Count pods on a node

```bash
kubectl get pods -A -o wide | grep <node> | wc -l
```

### Count pods by namespace

```bash
kubectl get pods -A --no-headers | awk '{print $1}' | sort | uniq -c
```

### List instance types in the cluster

```bash
kubectl get nodes -o json | jq -r \
'.items[].metadata.labels."node.kubernetes.io/instance-type"' | sort | uniq
```

### Node â†’ workload mapping

```bash
kubectl get nodes -o json | jq -r '.items[] |
  "\(.metadata.name)\t\(.metadata.labels.workload // "none")\t\(.metadata.labels."node.kubernetes.io/instance-type")"'
```
